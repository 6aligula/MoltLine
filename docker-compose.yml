services:
  api:
    build:
      context: ./moldline-api-v2
    container_name: chat-api
    restart: unless-stopped
    environment:
      - PORT=8080
    ports:
      - "127.0.0.1:18000:8080"
    networks:
      - moldline

  web:
    build:
      context: ./web
      dockerfile: Dockerfile
      args:
        # Para producci√≥n, override: VITE_API_BASE_URL=https://api.moldline.space VITE_WS_URL=wss://api.moldline.space
        VITE_API_BASE_URL: http://localhost:18000
        VITE_WS_URL: ws://localhost:18000
    container_name: chat-web
    restart: unless-stopped
    ports:
      - "127.0.0.1:5173:80"
    depends_on:
      - api
    networks:
      - moldline

networks:
  moldline:
    driver: bridge
